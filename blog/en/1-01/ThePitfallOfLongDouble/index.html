<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="{% note default %}
Preface This article is a repost, originally written by David on the Prelert&amp;rsquo;s website. The original article is now only accessible on WebArchive.
I found this article when I&amp;rsquo;m searching for the reason why Rust doesn&amp;rsquo;t have a corresponding type for long double in C/C++, which have caused some interoperability issues (see here and here). On the contrary, the languages Zig and the newly born Carbon both support f16 and f128 types (Zig also supports f80 and Carbon also supports bfloat16)."><title>The Pitfall Of Long Double</title><link rel=canonical href=https://zyxin.xyz/blog/en/1-01/ThePitfallOfLongDouble/><link rel=stylesheet href=/blog/scss/style.min.5be32ca3f6e1a997c75795c4359147cc6d4fbd34948c0acd51e31d237033978a.css><meta property="og:title" content="The Pitfall Of Long Double"><meta property="og:description" content="{% note default %}
Preface This article is a repost, originally written by David on the Prelert&amp;rsquo;s website. The original article is now only accessible on WebArchive.
I found this article when I&amp;rsquo;m searching for the reason why Rust doesn&amp;rsquo;t have a corresponding type for long double in C/C++, which have caused some interoperability issues (see here and here). On the contrary, the languages Zig and the newly born Carbon both support f16 and f128 types (Zig also supports f80 and Carbon also supports bfloat16)."><meta property="og:url" content="https://zyxin.xyz/blog/en/1-01/ThePitfallOfLongDouble/"><meta property="og:site_name" content="JacobZ"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Numerics"><meta property="article:tag" content="C/C++"><meta name=twitter:title content="The Pitfall Of Long Double"><meta name=twitter:description content="{% note default %}
Preface This article is a repost, originally written by David on the Prelert&amp;rsquo;s website. The original article is now only accessible on WebArchive.
I found this article when I&amp;rsquo;m searching for the reason why Rust doesn&amp;rsquo;t have a corresponding type for long double in C/C++, which have caused some interoperability issues (see here and here). On the contrary, the languages Zig and the newly born Carbon both support f16 and f128 types (Zig also supports f80 and Carbon also supports bfloat16)."><link rel="shortcut icon" href=/img/icon16.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/blog/en><img src=/blog/img/avatar_hua7c33bdc6ff69af7d15e47ee16119217_164168_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>üêà</span></figure><div class=site-meta><h1 class=site-name><a href=/blog/en>JacobZ</a></h1><h2 class=site-description>Blog of him</h2></div></header><ol class=social-menu><li><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.last.fm/user/cmpute target=_blank title=Last.fm rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-radio" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3 4.629 6.749A1 1 0 004 7.677V19a1 1 0 001 1h14a1 1 0 001-1V8a1 1 0 00-1-1H4.5"/><path d="M4 12h16"/><path d="M7 12v-2"/><path d="M17 16v.01"/><path d="M13 16v.01"/></svg></a></li><li><a href=mailto:cmpute@foxmail.com target=_blank title=Mail rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="3" y="5" width="18" height="14" rx="2"/><polyline points="3 7 12 13 21 7"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blog/en/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/blog/en/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/blog/en/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/blog/en/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://zyxin.xyz/blog/en/ selected>English</option><option value=https://zyxin.xyz/blog/>‰∏≠Êñá</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#preface>Preface</a></li><li><a href=#contents>Contents</a><ol><li><a href=#lack-of-testing>Lack of testing</a></li><li><a href=#portability>Portability</a></li><li><a href=#conclusion>Conclusion</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blog/en/categories/Coding/>Coding</a>
<a href=/blog/en/categories/Language/>Language</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/en/1-01/ThePitfallOfLongDouble/>The Pitfall Of Long Double</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer><footer class=article-translations><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/ class=link>‰∏≠Êñá</a></div></footer></div></header><section class=article-content><p>{% note default %}</p><h2 id=preface>Preface</h2><p>This article is a repost, originally written by David on the Prelert&rsquo;s website. The original article is now only <a class=link href=https://web.archive.org/web/20170422155137/http://info.prelert.com/blog/author/david target=_blank rel=noopener>accessible on WebArchive</a>.</p><p>I found this article when I&rsquo;m searching for the reason why Rust doesn&rsquo;t have a corresponding type for <code>long double</code> in C/C++, which have caused some interoperability issues (see <a class=link href="https://immunant.com/blog/2019/11/rust2020/#:~:text=long%20doubletypes%20in%20C%20are%20specified%20as%20being,with%20C%20code%2C%20Rust%20needs%20to%20support%20long" target=_blank rel=noopener>here</a> and <a class=link href=https://github.com/rust-lang/rust-bindgen/issues/1549 target=_blank rel=noopener>here</a>). On the contrary, the languages Zig and the newly born Carbon both support <code>f16</code> and <code>f128</code> types (Zig also supports <code>f80</code> and Carbon also supports <code>bfloat16</code>). But that&rsquo;s not suprising because they all aim to provide max interoperability with C/C++. This article might explain some of the reason why Rust doesn&rsquo;t support float types with higher precision.
{% endnote %}</p><h2 id=contents>Contents</h2><p>C++ provides three floating point data types: <code>float</code>, <code>double</code> and <code>long double</code>. All the <a class=link href="http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS%2FISO%2FIEC+14882-2012" target=_blank rel=noopener>C++11 standard</a> says about these types is:</p><blockquote><p>The type double provides at least as much precision as float, and the type long double provides at least as much precision as double.</p><p>The set of values of the type float is a subset of the set of values of the type double; the set of values of the type double is a subset of the set of values of the type long double. The value representation of floating-point types is implementation-defined.</p></blockquote><p>However, almost all C++ compilers are part of a family that also includes a C compiler, and Annex F of the <a class=link href="http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS/ISO/IEC%209899-1999%20%28R2005%29" target=_blank rel=noopener>C99 standard</a> is more prescriptive:</p><blockquote><ul><li>The float type matches the IEC 60559 single format.</li><li>The double type matches the IEC 60559 double format.</li><li>The long double type matches an IEC 60559 extended format, else a non-IEC 60559 extended format, else the IEC 60559 double format.</li></ul></blockquote><p>Since only a complete masochist would write a C++ compiler that used different types for floating point than their closely related C compiler, in practice C++ adheres to the same rules. Certainly every C++ compiler I&rsquo;ve ever worked with over the last 20 years has implemented the float and double types using the single and double precision representations defined in <a class=link href=http://en.wikipedia.org/wiki/IEEE_floating_point target=_blank rel=noopener>IEC 60559</a> (which is the same as <a class=link href=http://en.wikipedia.org/wiki/IEEE_754-1985 target=_blank rel=noopener>IEEE 754</a>). But there is some variation in implementations of the last of these types, long double, and this can cause problems.</p><p>Throughout my career in software development I&rsquo;ve run into several issues with the long double type, and these fall into the two basic categories of:</p><ol><li>Lack of testing</li><li>Portability</li></ol><h3 id=lack-of-testing>Lack of testing</h3><p>At the end of last year <a class=link href=https://web.archive.org/web/20170305103541/http://www.prelert.com/blog/linux-speeds-ahead/ target=_blank rel=noopener>I wrote about a problem</a> that would fall into the first category. A <a class=link href="http://sourceware.org/bugzilla/show_bug.cgi?id=2445" target=_blank rel=noopener>bug</a> in the x86_64 implementation of the <code>powl()</code> function in glibc went unfixed for over 5 years. I suspect if the bug had been in the more widely used <a class=link href=http://pubs.opengroup.org/onlinepubs/9699919799/functions/pow.html target=_blank rel=noopener>pow()</a> function then more of a fuss would have been made and somebody would have fixed it sooner. Because the long double version of the function is less widely used, the bug was left to fester.</p><p>Another example of the lack of testing long double gets is a problem I ran into with the IBM xlC/C++ compiler on <a class=link href=http://www-03.ibm.com/systems/power/software/aix/ target=_blank rel=noopener>AIX</a> before joining Prelert. The name (hard link) through which the compiler is <a class=link href="http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Fcompiler%2Fref%2Ftucmpinv1.htm" target=_blank rel=noopener>invoked</a> defines how it will behave, and when invoked using the name xlC128_r it uses a 128 bit representation for long double. At one time, even the most trivial programs compiled like this would core dump. Although the <a class=link href="http://www-01.ibm.com/support/docview.wss?uid=swg1IY96361" target=_blank rel=noopener>bug report</a> shows an example calling <a class=link href=http://pubs.opengroup.org/onlinepubs/007908775/xsh/fork.html target=_blank rel=noopener>fork()</a>, even a simple &ldquo;Hello world&rdquo; program would core dump on exit if compiled with the <a class=link href="http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Fcompiler%2Fref%2Fruoptbrt.htm" target=_blank rel=noopener>-brtl</a> flag! Clearly all the testing had been done on the more commonly used invocations of the compiler (where long double is not 128 bits in size).</p><h3 id=portability>Portability</h3><p>On the portability side, some gotchas to be aware of are:</p><ol><li>Microsoft <a class=link href=http://en.wikipedia.org/wiki/Visual_C%2B%2B target=_blank rel=noopener>Visual C++</a> represents long double using IEEE 754 double precision ‚Äì just like double (the third option permitted by C99). Therefore, making a distinction between double and long double in your code is pointless if you only ever compile with Microsoft Visual C++. But if you have to support platforms other than Windows too and use long double then you&rsquo;ve built in a key difference in behaviour between the platforms that may bite you. Most other x86 compilers treat long double as being the 80 bit extended precision type as used by the <a class=link href=http://en.wikipedia.org/wiki/X87 target=_blank rel=noopener>x87</a> floating-point unit.</li><li>On <a class=link href=http://en.wikipedia.org/wiki/SPARC target=_blank rel=noopener>SPARC</a> chips (OK I know they&rsquo;re dying out) the long double type maps to a 128 bit representation, but, by default, compilers will generate code to do the operations in software rather than in hardware. This dates back to a time when most SPARC chips couldn&rsquo;t do the operations in hardware and would request it be done in software using interrupts. Doing the 128 bit floating point operations in software unconditionally was faster than reacting to these interrupts. However, doing operations on long doubles in software is orders of magnitude slower than doing the same operations on doubles in hardware ‚Äì some of our unit tests were 20 times slower when we encountered this problem, and the tests weren&rsquo;t purely doing long double arithmetic. This is a case where code can be portable in terms of compiling and producing the correct results, but not in terms of having acceptable performance.</li></ol><p>It&rsquo;s instructive to look at what other portable languages do. Java has <a class=link href=http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html target=_blank rel=noopener>float and double types</a> corresponding to IEEE 754&rsquo;s single and double precision representations (and unlike C++ the Java standard is <a class=link href=http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3 target=_blank rel=noopener>very explicit</a> about how floating point operations may be implemented). Java doesn&rsquo;t make a long double type available to the programmer, presumably due to the portability issues I&rsquo;ve outlined (although the standard allows the x87 extended precision format to be used in intermediate calculations done by the JVM). <a class=link href=http://docs.python.org/2/library/stdtypes.html#typesnumeric target=_blank rel=noopener>Python</a> just has a float type, which is &ldquo;usually implemented as a double type in C&rdquo;. So, if your overall system contains components written in other languages then you&rsquo;ll avoid a data interchange problem by avoiding long double. The same goes if you want to store floating point numbers in a database table ‚Äì for example <a class=link href=http://www.postgresql.org/ target=_blank rel=noopener>PostgreSQL</a> offers <a class=link href=http://www.postgresql.org/docs/9.2/static/datatype-numeric.html#DATATYPE-FLOAT target=_blank rel=noopener>real and double</a> corresponding to IEEE 754&rsquo;s single and double precision representations.</p><p>A final advantage on x86 CPUs of sticking to float and double is that the compiler can then choose to do floating point calculations in the <a class=link href=http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions target=_blank rel=noopener>SSE</a> unit of the CPU, which means two or four operations can potentially be done in parallel and function arguments passed in registers by <a class=link href=http://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions target=_blank rel=noopener>64 bit calling conventions</a> are nicely in the SSE registers ready to be used. By contrast, long double variables can only be operated on in the x87 floating-point unit and are not passed in registers, slowing the program down.</p><h3 id=conclusion>Conclusion</h3><p>Some might say that using long double improves the accuracy of results. This may be true, but regardless of the amount of digits a fixed precision floating point type has it will be subject to <a class=link href=http://en.wikipedia.org/wiki/Loss_of_significance target=_blank rel=noopener>loss of significance</a> if a poorly chosen algorithm is applied to it. Using extended precision rather than double precision may mask this effect in some cases, but in the long term the only solutions are to use algorithms more appropriate for computer calculations or to somehow detect the loss of significance and replace the answer with an appropriate value.</p><p>In my opinion, if you want to write portable C++ code that not only compiles on multiple architectures but also doesn&rsquo;t have horrendous performance problems on some architectures, long double is best avoided. That&rsquo;s what we do at Prelert ‚Äì our C++ code doesn&rsquo;t use long double and when we use Boost we define the macro <a class=link href=http://www.boost.org/doc/libs/1_54_0/libs/math/doc/html/math_toolkit/config_macros.html#math_toolkit.config_macros.boost_math_macros target=_blank rel=noopener>BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS</a> so that <a class=link href=http://www.boost.org/doc/libs/1_54_0/libs/math/doc/html/index.html target=_blank rel=noopener>Boost.Math</a> doesn&rsquo;t either.</p></section><footer class=article-footer><section class=article-tags><a href=/blog/en/tags/Numerics/>Numerics</a>
<a href=/blog/en/tags/C/C++/>C/C++</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blog/en/2021-08/OneLinePerProgrammingLanguage/><div class=article-details><h2 class=article-title>Select Modern Programming Languages by One-line comments</h2></div></a></article><article><a href=/blog/en/1-01/ThePitfallOfVLA/><div class=article-details><h2 class=article-title>The Pitfall Of VLA in C</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jacob-zhongs-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2023 JacobZ</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>