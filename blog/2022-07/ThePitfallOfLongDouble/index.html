<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/blog/uploads/assets/icon200.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/uploads/assets/icon32.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/uploads/assets/icon16.png"><link rel="mask-icon" href="/blog/images/logo.svg" color="#222"><link rel="stylesheet" href="/blog/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"zyxin.xyz","root":"/blog/","images":"/blog/images","scheme":"Muse","darkmode":false,"version":"8.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Disqus Comments"},"livere":{"text":"LiveRe Comments"}},"store":true,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/blog/js/config.js"></script><meta name="description" content="前言 ❮ 此文转载自 Prelert 的博客，作者为 David。这篇文章目前只能在 WebArchive 找到了，因此我把此文转载并翻译到我的博客上。 我是在搜索为什么 Rust 没有对应 C&#x2F;C++ 中 long double 的数据类型的时候看到了这篇博文，Rust 不提供对应的数据类型造成了一些互操作性的问题（参见这里和这里）。与此相对的是，Zig 和新发布的 Carbon 语言都支持 f"><meta property="og:type" content="article"><meta property="og:title" content="长浮点数（long double）的陷阱"><meta property="og:url" content="http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/index.html"><meta property="og:site_name" content="Jacob Zhong"><meta property="og:description" content="前言 ❮ 此文转载自 Prelert 的博客，作者为 David。这篇文章目前只能在 WebArchive 找到了，因此我把此文转载并翻译到我的博客上。 我是在搜索为什么 Rust 没有对应 C&#x2F;C++ 中 long double 的数据类型的时候看到了这篇博文，Rust 不提供对应的数据类型造成了一些互操作性的问题（参见这里和这里）。与此相对的是，Zig 和新发布的 Carbon 语言都支持 f"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-07-24T05:19:33.000Z"><meta property="article:modified_time" content="2022-07-24T20:05:22.008Z"><meta property="article:author" content="Jacob Zhong"><meta property="article:tag" content="C&#x2F;C++"><meta property="article:tag" content="Numerics"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/","path":"2022-07/ThePitfallOfLongDouble/","title":"长浮点数（long double）的陷阱"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>长浮点数（long double）的陷阱 | Jacob Zhong</title><noscript><link rel="stylesheet" href="/blog/css/noscript.css"></noscript><link rel="alternate" href="/blog/atom.xml" title="Jacob Zhong" type="application/atom+xml">
</head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/blog/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Jacob Zhong</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">b.zyxin.xyz</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E6%96%87"><span class="nav-number">2.</span> <span class="nav-text">正文</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%BA%E4%B9%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">2.1.</span> <span class="nav-text">缺乏测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%80%A7"><span class="nav-number">2.2.</span> <span class="nav-text">可移植性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-number">2.3.</span> <span class="nav-text">结论</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Jacob Zhong" src="/blog/uploads/assets/avatar.png"><p class="site-author-name" itemprop="name">Jacob Zhong</p><div class="site-description" itemprop="description">Blog of Jacob Zhong</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/blog/archives/"><span class="site-state-item-count">62</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/blog/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/blog/tags/"><span class="site-state-item-count">50</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/cmpute" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cmpute" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://www.linkedin.com/in/jacobzhong/" title="LinkedIn → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;jacobzhong&#x2F;" rel="noopener" target="_blank"><i class="linkedin-square fa-fw"></i>LinkedIn</a> </span><span class="links-of-author-item"><a href="mailto:cmpute@foxmail.com" title="E-Mail → mailto:cmpute@foxmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://www.last.fm/user/cmpute" title="Last.fm → https:&#x2F;&#x2F;www.last.fm&#x2F;user&#x2F;cmpute" rel="noopener" target="_blank"><i class="lastfm-square fa-fw"></i>Last.fm</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Friend Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://hanyuz1996.github.io/" title="https:&#x2F;&#x2F;hanyuz1996.github.io&#x2F;" rel="noopener" target="_blank">Hanyuz</a></li><li class="links-of-blogroll-item"><a href="https://xingminw.github.io/" title="https:&#x2F;&#x2F;xingminw.github.io&#x2F;" rel="noopener" target="_blank">Xingminw</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog/uploads/assets/avatar.png"><meta itemprop="name" content="Jacob Zhong"><meta itemprop="description" content="Blog of Jacob Zhong"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jacob Zhong"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">长浮点数（long double）的陷阱</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-07-24 01:19:33 / 修改时间：16:05:22" itemprop="dateCreated datePublished" datetime="2022-07-24T01:19:33-04:00">2022-07-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/Coding/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus：</span> <a title="disqus" href="/blog/2022-07/ThePitfallOfLongDouble/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022-07/ThePitfallOfLongDouble/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><div class="note default"><h2 id="前言">前言<a class="header-anchor" href="#前言"> ❮</a></h2><p>此文转载自 Prelert 的博客，作者为 David。这篇文章目前只能<a target="_blank" rel="noopener" href="https://web.archive.org/web/20170422155137/http://info.prelert.com/blog/author/david">在 WebArchive 找到</a>了，因此我把此文转载并翻译到我的博客上。</p><p>我是在搜索为什么 Rust 没有对应 C/C++ 中 <code>long double</code> 的数据类型的时候看到了这篇博文，Rust 不提供对应的数据类型造成了一些互操作性的问题（参见<a target="_blank" rel="noopener" href="https://immunant.com/blog/2019/11/rust2020/#:~:text=long%20doubletypes%20in%20C%20are%20specified%20as%20being,with%20C%20code%2C%20Rust%20needs%20to%20support%20long">这里</a>和<a target="_blank" rel="noopener" href="https://github.com/rust-lang/rust-bindgen/issues/1549">这里</a>）。与此相对的是，Zig 和新发布的 Carbon 语言都支持 <code>f16</code> 和 <code>f128</code> 数据类型（其中 Zig 还支持 <code>f80</code>，Carbon 还支持 <code>bfloat16</code>）。不过这倒是不令人意外，因为 Zig 和 Carbon 都以与 C/C++ 的极致兼容性为卖点。这篇博客也许能解释一部分 Rust 不支持更高精度浮点数的原因。</p></div><span id="more"></span><h2 id="正文">正文<a class="header-anchor" href="#正文"> ❮</a></h2><p>C++ 提供三种浮点数据类型：<code>float</code>, <code>double</code> 和 <code>long double</code>。关于这些类型，<a target="_blank" rel="noopener" href="http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS%2FISO%2FIEC+14882-2012">C++11 标准</a>只提到了：</p><blockquote><p><code>double</code> 类型需要提供至少与 <code>float</code> 同等的精度，而 <code>long double</code> 需要提供至少与 <code>double</code> 同等的精度。</p><p><code>float</code> 类型所有支持的数值是 <code>duoble</code> 的子集；<code>double</code> 类型所有支持的数值是 <code>long duoble</code> 的子集。各浮点类型的数据表示方法取决于具体的实现。</p></blockquote><p>但是，几乎所有 C++ 编译器都带一个 C 编译器，而 <a target="_blank" rel="noopener" href="http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS/ISO/IEC%209899-1999%20%28R2005%29">C99 标准</a>的 F 附件则有更详细的规定：</p><blockquote><ul><li><code>float</code> 类型对应 IEC 60559 标准的单精度浮点数</li><li><code>double</code> 类型对应 IEC 60559 标准的双精度浮点数</li><li><code>long double</code> 类型对应 IEC 60559 标准的扩展精度浮点数，或者非 IEC 60559 的扩展精度浮点数，或者 IEC 60559 的双精度浮点数。</li></ul></blockquote><p>只有一个彻头彻尾的 M 才会编写一个在 C++ 和 C 部分使用不同浮点类型的 C++ 编译器，因此实际上 C++ 也要服从同样的规定。我所使用果的所有近 20 年内的 C++ 编译器都使用 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/IEEE_floating_point">IEC 60559</a>（也就是 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/IEEE_754-1985">IEEE 754</a>）所规定的单精度和双精度浮点数，但是在实现最后一个类型 ——<code>long double</code>—— 上这些编译器会有不一致，这也导致了一些问题。</p><p>在我的整个软件开发生涯中，我遇到过的几次与 <code>long double</code> 类型相关的问题，可以被归为两类：</p><ol><li>缺乏测试</li><li>可移植性</li></ol><h3 id="缺乏测试">缺乏测试<a class="header-anchor" href="#缺乏测试"> ❮</a></h3><p>在去年底我记录了一个<a target="_blank" rel="noopener" href="https://web.archive.org/web/20170305103541/http://www.prelert.com/blog/linux-speeds-ahead/">可以归为第一类的问题</a>。一个 glibc 在 x86_64 平台上的 <code>powl()</code> 函数实现中的 <a target="_blank" rel="noopener" href="http://sourceware.org/bugzilla/show_bug.cgi?id=2445">bug</a> 有五年多未得到修复。我感觉如果这个 bug 是在用的更广泛的 <a target="_blank" rel="noopener" href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/pow.html"><code>pow()</code></a>函数中，那么会有更多人感到惊奇然后有人会更快修复它。因为这个函数的 <code>long double</code> 版本用的人较少，因此这个 bug 就烂在那了。</p><p>另一个 <code>long double</code> 缺乏测试的例子是我在加入 Prelert 之前碰到的，与 IBM 的 xlC/C++ 编译器相关在 <a target="_blank" rel="noopener" href="http://www-03.ibm.com/systems/power/software/aix/">AIX</a> 系统上的问题。调用这个编译器的时候使用的名字（硬链接）决定了它的行为方式，当使用名称 xlC128_r 调用编译器时，它使用 128 位的 long double 表示。然后有一段时间，即使是最简单的程序编译都会崩（core dump）。尽管 <a target="_blank" rel="noopener" href="http://www-01.ibm.com/support/docview.wss?uid=swg1IY96361">bug 报告</a>里面提到了一个调用 <a target="_blank" rel="noopener" href="http://pubs.opengroup.org/onlinepubs/007908775/xsh/fork.html">fork()</a> 的例子，但其实如果打开了 <a target="_blank" rel="noopener" href="http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Fcompiler%2Fref%2Fruoptbrt.htm">-brtl</a> 开关，最简单的 "hello world" 程序也能崩！显然所有的测试都是在使用其他更常用的名字调用编译器时完成的（这些情况下 <code>long double</code> 不是 128 位）。</p><h3 id="可移植性">可移植性<a class="header-anchor" href="#可移植性"> ❮</a></h3><p>而关于可移植性，一些需要注意的坑有：</p><ol><li>微软的 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Visual_C%2B%2B">Visual C++</a> 使用 IEEE 754 双精度浮点数表示 <code>long double</code>—— 跟 <code>double</code> 一样（<code>C99</code> 标准所允许的第三种情况）。因此在你的代码中区分 <code>long double</code> 和 <code>double</code> 毫无意义如果你只用微软的 VC++ 进行编译。但如果你的代码需要支持别的平台并且你仍然使用 <code>long double</code>，那么你就给你的代码里面掺入了一个很关键的，与平台相关的行为区别，它会让你吃亏的。大部分其他 x86 编译器都把 <code>long double</code> 看作 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/X87">x87</a> 所使用的 80 位扩展精度浮点数。</li><li>在 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/SPARC">SPARC 芯片</a>上（我知道它已经快挂了），<code>long double</code> 类型使用 128 位的表示，但是默认情况下，编译器会生成软件实现，而非硬件实现的（浮点数）操作。这个情况可以回溯到大部分 SPARC 芯片都不支持这样的操作，然后使用中断来实现的时候。在软件层面实现浮点操作比去响应这些中断要快。但是软实现的浮点操作比硬件加速的浮点操作慢好几个数量级 —— 我们发现一些单元测试会慢 20 倍，而且这些并不是单纯的做 <code>long double</code> 运算的测试。这是一个牺牲性能来换取代码（在编译和正确性方面）可移植的例子。</li></ol><p>参考其他可移植的语言很有指导意义。Java 有与 IEEE754 的单 / 双精度浮点数对应的 <a target="_blank" rel="noopener" href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html"><code>float</code> 和 <code>double</code> 类型</a>（并且不像 C++，Java 标准<a target="_blank" rel="noopener" href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3">对如何实现浮点数运算非常明确</a>）。Java 没有给程序员提供 <code>long double</code> 类型，大概是因为我上面提到的可移植性问题（尽管这个标准允许在中间计算过程中使用 x87 扩展精度的格式）。<a target="_blank" rel="noopener" href="http://docs.python.org/2/library/stdtypes.html#typesnumeric">Python</a> 只有一个 <code>float</code> 类型，并且 “通常用 C 语言的 <code>double</code> 实现”。因此，如果你的整体系统包含使用其他语言编写的组件，那你弃用 <code>long double</code> 可以避免数据交换中的问题。同样的道理也适用于在数据库中存储浮点数 —— 例如 <a target="_blank" rel="noopener" href="http://www.postgresql.org/">PostgreSQL</a> 提供 <a target="_blank" rel="noopener" href="http://www.postgresql.org/docs/9.2/static/datatype-numeric.html#DATATYPE-FLOAT"><code>real</code> 和 <code>double</code></a>，对应 IEEE 754 的单 / 双精度浮点数。</p><p>最后，一个在 x86 CPU 上只用 <code>float</code> 和 <code>double</code> 的好处是，编译器可以利用上 CPU 的 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions">SSE</a> 单元，然后两次或四次（浮点）运算有机会并行完成。这时使用 64 位调用约定的把函数参数传到寄存器中，那之后就可以直接使用 SSE 寄存器了。反之，<code>long double</code> 变量只能在 <code>x87</code> 浮点运算单元中使用，并且不会使用寄存器传参，从而让程序变慢了。</p><h3 id="结论">结论<a class="header-anchor" href="#结论"> ❮</a></h3><p>有些人可能会说，使用 <code>long double</code> 可以提高结果的精度。这可能是对的，但是无论一个固定精度的浮点数有多少有效位数，它都会有有效位数损失的情况（如果使用的算法不好的话）。使用扩展精度而不是双精度可能会在某些情况下避免这些问题，但是长期来看唯一的解决方法是使用更适合计算机的算法，或者设法检测有效位数损失，并且把结果替换成合适的值。</p><p>在我看来，如果你想编写可移植的 C++ 代码，使得它不仅可以在多个平台运行，并且在某些平台上没有很夸张的性能问题，你最好避开 <code>long duoble</code>。这也是我们在 Prelert 做法 —— 我们的 C++ 代码不使用 <code>long duoble</code>，并且在使用 Boost 的时候我们定义 <a target="_blank" rel="noopener" href="http://www.boost.org/doc/libs/1_54_0/libs/math/doc/html/math_toolkit/config_macros.html#math_toolkit.config_macros.boost_math_macros">BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS</a> 这个宏，让 <a target="_blank" rel="noopener" href="http://www.boost.org/doc/libs/1_54_0/libs/math/doc/html/index.html">Boost.Math</a> 也不使用。</p></div><footer class="post-footer"><div class="reward-container"><div>Treat me some coffee XD</div><button>赞赏</button><div class="post-reward"><div><img src="/blog/uploads/assets/wechatpay.jpg" alt="Jacob Zhong 微信"> <span>微信</span></div><div><img src="/blog/uploads/assets/alipay.jpg" alt="Jacob Zhong 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Jacob Zhong</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/" title="长浮点数（long double）的陷阱">http://zyxin.xyz/blog/2022-07/ThePitfallOfLongDouble/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/blog/tags/C-C/" rel="tag"># C/C++</a> <a href="/blog/tags/Numerics/" rel="tag"># Numerics</a></div><div class="post-nav"><div class="post-nav-item"><a href="/blog/2021-11/UtilizeYourComputationPower/" rel="prev" title="冬日取暖最佳方式 — 利用闲置的计算资源"><i class="fa fa-chevron-left"></i> 冬日取暖最佳方式 — 利用闲置的计算资源</a></div><div class="post-nav-item"><a href="/blog/2022-07/ThePitfallOfVLA/" rel="next" title="（C 语言）变长数组的陷阱">（C 语言）变长数组的陷阱 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="tabs tabs-comment"><ul class="nav-tabs"><li class="tab"><a href="#comment-disqus">Disqus Comments</a></li><li class="tab"><a href="#comment-livere">LiveRe Comments</a></li></ul><div class="tab-content"><div class="tab-pane disqus" id="comment-disqus"><div class="comments" id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div><div class="tab-pane livere" id="comment-livere"><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC81NDQ2Ni8zMDkzNw=="></div></div></div></div></div></main><footer class="footer"><div class="footer-inner"><div class="languages"><label class="lang-select-label"><i class="fa fa-language"></i> <span>简体中文</span> <i class="fa fa-angle-up" aria-hidden="true"></i></label> <select class="lang-select" data-canonical="" aria-label="选择语言"><option value="zh-CN" data-href="/blog/2022-07/ThePitfallOfLongDouble/" selected>简体中文</option><option value="en" data-href="/blog/en/2022-07/ThePitfallOfLongDouble/" selected>English</option></select></div><div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fire"></i> </span><span class="author" itemprop="copyrightHolder">Jacob Zhong</span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/schemes/muse.js"></script><script src="/blog/js/next-boot.js"></script><script src="/blog/js/pjax.js"></script><script src="/blog/js/third-party/pace.js"></script><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script><script src="/blog/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"jacob-zhongs-blog","count":true,"i18n":{"disqus":"disqus"}}</script><script src="/blog/js/third-party/comments/disqus.js"></script><script src="/blog/js/third-party/comments/livere.js"></script></body></html>